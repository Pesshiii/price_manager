{% load export_url from django_tables2 %}
{% load django_tables2 %}

<div id="main-table-container" class="table-area mb-5">
  <h1 class="mb-4">Главный прайс</h1>

  {% if category_tables %}
    <div class="d-flex flex-column gap-4">
      {% for category_table in category_tables %}
        <div class="table-responsive card p-3 shadow-sm overflow-visible">
          <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
            <h2 class="h5 mb-0">
              {{ category_table.category.name|default:"Без категории" }}
            </h2>
            <span class="badge text-bg-light">
              {{ category_table.table.rows|length }}
            </span>
          </div>
          {% render_table category_table.table %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info mb-0">
      Товары не найдены.
    </div>
  {% endif %}
</div>
