{% extends 'base.html' %}

{% block title %}
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
{% endblock %}

{% block body %}
<div class="container mt-4">
  <h1 class="mb-4">–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∞–π—Å</h1>

  <!-- –ü–∞–Ω–µ–ª—å –ø–æ–∏—Å–∫–∞ –∏ –¥–µ–π—Å—Ç–≤–∏–π -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <form method="get" class="row g-3 align-items-end">

        <!-- –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º -->
        <div class="col-md-4">
          <label for="id_search" class="form-label">
            üîé –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º
          </label>
          {{ filter_form.search }}
          <div class="form-text">
            –ë—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω–æ –ª—é–±–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–∞—Ä—Ç–∏–∫—É–ª, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å, –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏ —Ç.–ø.).
          </div>
        </div>

        <!-- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é -->
        <div class="col-md-4">
          <label for="id_name" class="form-label">
            üìå –ù–∞–∑–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–≥–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
          </label>
          {{ filter_form.name }}
          <div class="form-text">
            –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ø–∞–¥—É—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –µ—Å—Ç—å —ç—Ç–æ —Å–ª–æ–≤–æ.
          </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div class="col-md-4 d-flex gap-2">
          <button type="submit" class="btn btn-primary flex-fill">
            üîç –ò—Å–∫–∞—Ç—å
          </button>
          <a href="{% url 'main-sync' %}" class="btn btn-success flex-fill">
            üîÑ –û–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏
          </a>
        </div>
      </form>
    </div>
  </div>

  <!-- –¢–∞–±–ª–∏—Ü–∞ -->
  <div class="table-responsive shadow-sm rounded bg-white p-2">
    {% load django_tables2 %}
    {% render_table table %}
  </div>
</div>
{% endblock %}

{% block script %}
<script src="https://unpkg.com/htmx.org@1.9.12"></script>
<script>
  // HTMX will send the token automatically on every POST/PUT/DELETE
  document.body.addEventListener('htmx:configRequest', (evt) => {
      evt.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
  });
</script>
{% endblock %}
