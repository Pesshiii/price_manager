{% extends 'base.html' %}

{% block title %}
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
{% endblock %}

{% block body %}
<div class="container-fluid mt-4">
  <h1 class="mb-4">–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∞–π—Å</h1>

  <div class="row">
    <!-- –ë–ª–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
    <div class="col-md-3">
      <form method="get" class="card p-3 shadow-sm">
        <h5 class="mb-3">–§–∏–ª—å—Ç—Ä—ã</h5>

        <!-- –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º -->
        <div class="mb-3">
          <label class="form-label">–ü–æ–∏—Å–∫</label>
          {{ filter_form.search }}
          <small class="form-text text-muted">
            –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º (–ø—Ä–∏–º–µ—Ä–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
          </small>
        </div>

        <!-- –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é -->
        <div class="mb-3">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
          {{ filter_form.name }}
          <small class="form-text text-muted">
            –î–æ–ª–∂–Ω–æ –≤—Ö–æ–¥–∏—Ç—å –≤ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (—Å—Ç—Ä–æ–≥–æ)
          </small>
        </div>

        <!-- –ü–æ—Å—Ç–∞–≤—â–∏–∫ -->
        <div class="mb-3">
          <label class="form-label">–ü–æ—Å—Ç–∞–≤—â–∏–∫</label>
          {{ filter_form.supplier }}
        </div>

        <!-- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å -->
        <div class="mb-3">
          <label class="form-label">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å</label>
          {{ filter_form.manufacturer }}
        </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
        <div class="mb-3">
          <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          {{ filter_form.category }}
        </div>

        <!-- –ê—Ä—Ç–∏–∫—É–ª -->
        <div class="mb-3">
          <label class="form-label">–ê—Ä—Ç–∏–∫—É–ª</label>
          {{ filter_form.article }}
        </div>

        <!-- –¢–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏ -->
        <div class="form-check mb-3">
          {{ filter_form.in_stock }}
          <label class="form-check-label">–¢–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏</label>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div class="col-md-4 d-flex gap-2">
          <button type="submit" class="btn btn-primary flex-fill">
            üîç –ò—Å–∫–∞—Ç—å
          </button>
          <a href="{% url 'main-product-sync' %}" class="btn btn-success flex-fill">
            üîÑ –û–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏
          </a>
        </div>
      </form>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ -->
    <div class="col-md-9">
      {% load export_url from django_tables2 %}

      <div class="table-responsive card p-3 shadow-sm">
        {% load django_tables2 %}
        {% render_table table %}
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script src="https://unpkg.com/htmx.org@1.9.12"></script>
<script>
  document.body.addEventListener('htmx:configRequest', (evt) => {
    evt.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
  });
</script>
{% endblock %}
