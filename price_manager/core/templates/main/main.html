{% extends 'base.html' %}

{% block title %}
Главная страница
{% endblock %}

{% block body %}
  <h1>Главный прайс</h1>
  <div class="container">
    <form method="get" class="form form-control mb-3 w-100">
        <div class="w-100">
          {{filter_form.as_p }}
          <button type="submit" class="btn btn-primary ml-2">Поиск</button>
        </div>
    </form>
  </div>
  <div class="table-responsive">
    {% load django_tables2 %}
    {% render_table table %}
  </div>
{% endblock %}

{% block script %}
<script src="https://unpkg.com/htmx.org@1.9.12"></script>
<script>
  // HTMX will send the token automatically on every POST/PUT/DELETE
  document.body.addEventListener('htmx:configRequest', (evt) => {
      evt.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
  });
</script>
{% endblock %}