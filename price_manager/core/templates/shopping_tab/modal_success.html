<div class="modal-header">
  <h5 class="modal-title">Товар добавлен</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
</div>
<div class="modal-body">
  <div class="alert alert-success" role="alert">
    «{{ product.name }}» добавлен в заявку «{{ shopping_tab.name }}» ({{ quantity }} шт.).
  </div>
  <div class="text-end">
    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Продолжить</button>
  </div>
</div>
<script>
  (function() {
    const modalElement = document.getElementById('shoppingTabSelectionModal');
    if (modalElement && window.bootstrap) {
      const modalInstance = window.bootstrap.Modal.getOrCreateInstance(modalElement);
      window.setTimeout(() => modalInstance.hide(), 800);
    }
    document.body.dispatchEvent(new CustomEvent('shopping-tab:item-added', {
      detail: {
        tabId: {{ shopping_tab.pk }},
        productId: {{ product.pk }},
        quantity: {{ quantity }}
      }
    }));
  })();
</script>
